---
import BaseLayout from '../../layouts/BaseLayout.astro';
---
<BaseLayout title="站内搜索" description="使用 Pagefind 搜索全文内容。">
  <h1 class="text-3xl font-bold text-gray-900">站内搜索</h1>
  <p class="mt-2 text-gray-700">按下 “/” 可直接聚焦输入框，搜索结果支持高亮与摘要。</p>

  <div id="search" class="mt-6" />

  <link rel="stylesheet" href="/pagefind/pagefind-ui.css" />
  <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
      const ui = new PagefindUI({
        element: '#search',
        showSubResults: true,
        autofocus: true,
      });

      window.addEventListener('keydown', (event) => {
        if (event.key === '/' && document.activeElement?.tagName !== 'INPUT') {
          event.preventDefault();
          const input = document.querySelector('#search input');
          if (input) input.focus();
        }
      });
    });
  </script>
</BaseLayout>
