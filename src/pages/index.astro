---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';
import { filterDrafts, sortPosts } from '../lib/utils';
import { siteConfig } from '../lib/siteConfig';

const posts = sortPosts(filterDrafts(await getCollection('blog')));
const latest = posts.slice(0, 3);
---
<BaseLayout title={siteConfig.title} description={siteConfig.description}>
  <section class="mb-10 rounded-2xl bg-gradient-to-r from-blue-50 to-cyan-50 p-10 shadow-sm">
    <p class="text-sm uppercase tracking-wide text-blue-700">静态·SEO 优先</p>
    <h1 class="mt-3 text-3xl font-bold text-gray-900 sm:text-4xl">{siteConfig.title}</h1>
    <p class="mt-3 max-w-2xl text-lg text-gray-700">{siteConfig.description}</p>
    <div class="mt-4 flex flex-wrap gap-3 text-sm text-gray-700">
      <span class="rounded-full bg-white px-3 py-1 shadow">Astro 5</span>
      <span class="rounded-full bg-white px-3 py-1 shadow">Tailwind CSS v4</span>
      <span class="rounded-full bg-white px-3 py-1 shadow">Pagefind 搜索</span>
    </div>
  </section>

  <section class="space-y-4" aria-labelledby="latest-posts">
    <div class="flex items-center justify-between">
      <h2 id="latest-posts" class="text-2xl font-semibold text-gray-900">最新文章</h2>
      <a href="/posts/" class="text-sm font-semibold text-primary">查看全部</a>
    </div>
    <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
      {latest.map((post) => (
        <PostCard post={post} />
      ))}
    </div>
  </section>
</BaseLayout>
